# IR_Final_Project

This project is a web scraping and content extraction pipeline for collecting and processing opportunity listings from [opportunitiescircle.com](https://www.opportunitiescircle.com/).

## Directory Structure

```
IR_Final_Project/
├── requirements.txt           # Python dependencies
└── grep/
    ├── page.py                # Scrapes paginated listing pages and saves HTML
    ├── activity.py            # Extracts opportunity links from listing HTML files
    ├── activity_html.py       # Downloads each opportunity's detail page HTML
    ├── content.py             # Extracts and saves main text content from each detail HTML
    ├── build_lsi.py           # Builds term-document matrix and generates LSI document/term vectors
    ├── embed_departments.py   # Generates recommendations for departments based on LSI vectors
    ├── find_similar_docs.py   # Finds top 5 most relevant documents using LSI embeddings
    ├── department.txt         # Input file listing departments (manual or external)
    ├── term_data_lsi.npz      # LSI term data (terms and vectors) (generated by build_lsi.py)
    ├── doc_data_lsi.npz       # LSI document data (file names and vectors) (generated by build_lsi.py)
    ├── baseline_recommendations.txt # Department-based opportunity recommendations (generated by embed_departments.py)
    ├── activity_data/         # Downloaded HTML files for each opportunity
    ├── activity_data_text/    # Extracted text content for each opportunity
    └── page_data/             # Downloaded HTML files for each listing page
```

## Usage

1. **Install dependencies**
   ```bash
   pip install torch==2.7.0
   pip install torch_scatter==2.1.2 -f https://data.pyg.org/whl/torch-2.7.0+cu128.html
   pip install -r ../requirements.txt
   ```

2. **Step 1: Download listing pages**
   - Run `page.py` to download paginated opportunity listings (pages 1–25) into `page_data/`.
   ```bash
   python page.py
   ```

3. **Step 2: Extract opportunity links**
   - Run `activity.py` to parse each listing page and collect unique opportunity links into `activity_data/opportunity_links.txt`.
   ```bash
   python activity.py
   ```

4. **Step 3: Download opportunity detail pages**
   - Run `activity_html.py` to download each opportunity's detail HTML into `activity_data/`.
   ```bash
   python activity_html.py
   ```

5. **Step 4: Extract main content**
   - Run `content.py` to extract and save the main text content from each HTML file into `activity_data_text/`.
   ```bash
   python content.py
   ```

6. **Step 5: Generate LSI vectors**
   - Run `build_lsi.py` to build the term-document matrix, apply Latent Semantic Indexing (LSI), and generate term data (`term_data_lsi.npz`) and document data (`doc_data_lsi.npz`).
   ```bash
   python build_lsi.py
   ```

7. **Step 6: Generate Department Recommendations**
   - Run `embed_departments.py` to generate opportunity recommendations for departments. This script uses `department.txt`, `term_data_lsi.npz`, and `doc_data_lsi.npz` as input.
   - The recommendations are saved to `grep/baseline_recommendations.txt`.
   ```bash
   python embed_departments.py
   ```

8. **Step 7: Find similar documents**
   - To find the top 5 most relevant documents to a given file, use the interactive script:
   ```bash
   python find_similar_docs.py
   ```
   Enter a filename from `activity_data_text` (e.g. `commonwealth-distance-learning-scholarships.txt`) when prompted, and the script will output the five most similar documents based on LSI embeddings.

## Notes
- All scripts are written in Python and use `requests` and `BeautifulSoup` for web scraping and parsing.
- The pipeline is modular; you can run each step independently.
- The output folders will be created automatically if they do not exist.

## License
This project is for educational and research purposes only.

@inproceedings{CLCRec,
  title     = {Contrastive Learning for Cold-start Recommendation},
  author    = {Wei, Yinwei and 
               Wang, Xiang and 
               Qi, Li and
               Nie, Liqiang and 
               Li, Yan and 
               Li, Xuanqing and 
               Chua, Tat-Seng},
  booktitle = {Proceedings of the 29th ACM International Conference on Multimedia},
  pages     = {--},
  year      = {2021}
}